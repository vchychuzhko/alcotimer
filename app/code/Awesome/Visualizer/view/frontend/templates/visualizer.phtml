<?php /** @var \Awesome\Visualizer\Block\Visualizer $block */ ?>
<div class="visualizer">
    <div class="playlist" data-playlist>
        <button class="playlist__toggle hamburger" type="button" title="<?= __('Playlist') ?>" data-playlist-toggle>
            <span class="hamburger__icon"></span>
        </button>
        <div class="playlist__wrapper">
            <h2 class="playlist__title"><?= __('Playlist') ?></h2>
            <?php if ($config = $block->getPlaylistConfig()): ?>
                <ul class="playlist__list">
                    <?php foreach ($config as $id => $track): ?>
                        <li class="playlist__item">
                            <a class="playlist__link"
                               href="javascript:void(0);"
                               title="<?= $track['title'] ?>"
                               data-track-id="<?= $id ?>">
                                <img class="playlist__item__thumb"
                                     src="<?= $track['thumbnail'] ?? $block->getPlaylistDefaultThumbnail() ?>"
                                     alt="<?= $track['title'] . ' Logo' ?>"/>
                                <div class="playlist__item__meta">
                                    <div class="playlist__item__meta__title"><?= $track['title'] ?></div>
                                    <div class="playlist__item__meta__artist"><?= $track['artist'] ?></div>
                                </div>
                                <div class="playlist__item__duration"><?= $track['duration'] ?></div>
                            </a>
                        </li>
                    <?php endforeach; ?>
                </ul>
            <?php else: ?>
                <span class="playlist__message"><?= __('No audio tracks found') ?></span>
            <?php endif; ?>
            <span class="playlist__info"><?= __('Just drag\'n\'drop audio file to this tab to play it') ?></span>
        </div>
    </div>
    <div class="player" data-player>
        <div class="player__legend">
            <span class="player__name" data-name><?= __('Select audio from playlist or drag\'n\'drop a file here') ?></span>
            <span class="player__time" data-time>--:--:--</span>
        </div>
        <div class="player__scene">
            <canvas class="player__canvas" height="900" width="900" data-canvas></canvas>
            <button class="player__control" type="button" title="<?= __('Play') ?>" tabindex="-1" data-canvas-control></button>
        </div>
        <audio class="player__audio" controls="true" crossorigin="anonymous" data-audio></audio>
    </div>
</div>
<script type="text/x-awesome-init">
{
    ".visualizer": {
        "player": {
            "playlistConfig": <?= $block->getPlaylistJsonConfig() ?>
        }
    }
}
</script>
